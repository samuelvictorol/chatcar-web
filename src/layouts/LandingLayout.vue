<template>
  <q-layout view="lHh Lpr lFf">
    <q-header elevated class="bg-dark text-white">
      <q-toolbar class="container">
        <q-toolbar-title class="text-h6 row items-center no-wrap">
          <q-avatar size="50px" class="q-mr-sm">
            <img src="/logo.jpeg" alt="Logo" />
          </q-avatar>
          <div class="animate__animated animate__fadeInLeft animate__slower">
            ChatCar
          </div>
        </q-toolbar-title>
        <!-- <q-btn label="experimente" icon-right="rocket_launch" color="green-14" class="q-mr-sm " glossy to="/loja" /> -->
        <q-btn v-if="!storedLoja" color="teal" glossy dense class="q-px-sm text-white" label="Iniciar Sess√£o"
          icon-right="login" to="/login" />
        <div v-else>
          <q-btn color="teal" @click="logout()" dense class="q-px-sm text-white q-mr-xs" flat label="sair" />
          <q-btn color="teal" dense class="q-px-sm text-white" label="Meu Painel" icon-right="store" glossy
            to="/loja" />
        </div>
      </q-toolbar>
      <q-tabs inline-label v-model="tab" class="text-grey-2 ">
        <q-route-tab class="animate__animated animate__flipInX animate__slower animate__delay-2s row"
          icon="rocket_launch" label="experimente j√°" to="/jatoveiculos" />

        <q-tab class="animate__animated animate__flipInX animate__slower animate__delay-2s row" label="Planos"
          icon="view_week" name="planos" @click="scrollToSection('planos')" />
      </q-tabs>

    </q-header>

    <q-page-container class="animate__animated animate__fadeIn">
      <div class="w100">
        <q-img src="/logo.jpeg" class="w100" style="object-fit: cover;position: fixed; bottom: 0px; z-index: -90"
          height="100vh">
        </q-img>
      </div>
      <!-- HERO Section -->
      <section class="q-pb-xl q-pt-lg  bg-dark text-white text-center">
        <div class="container q-pb-xl">
          <h1 class="text-h3 text-bold "><q-icon name="sms" color="white"
              class="animate__animated animate__zoomIn animate__slower animate__delay-2s"
              size="xl"></q-icon><br>Transforme
            Conversas em Vendas com o ChatCar<br><q-icon name="paid" color="teal-14"
              class="animate__animated animate__zoomIn animate__slower animate__delay-3s" size="xl"></q-icon></h1>
          <p class="text-subtitle1  q-px-lg ">
            Atenda 24 horas, aumente a experi√™ncia do seu cliente e gere leads com i.a.
          </p>
          <q-btn label="CONHE√áA A PLATAFORMA" color="teal" icon="query_stats" class="q-px-md q-mt-lg" to="/login"
            unelevated size="lg" />
        </div>
      </section>
      <div class="w100 row no-wrap justify-between">
        <img src="porque.png" width="50%" alt="">
        <img src="cowboy.png" width="50%" alt="">
      </div>
      <!-- Como Funciona -->
      <section class="bg-grey-2 q-py-xl container text-center">
        <h2 class="text-h4 text-bold q-pb-lg">Como Funciona?</h2>
        <div class="row q-col-gutter-md">
          <div class="col-12 col-md-4">
            <q-icon name="storefront" size="64px" color="secondary" />
            <h3 class="text-subtitle1 q-mt-sm">Cadastre sua Loja</h3>
            <p>Registre sua loja e seu estoque com facilidade na plataforma.</p>
          </div>
          <div class="col-12 col-md-4">
            <q-icon name="smart_toy" size="64px" color="secondary" />
            <h3 class="text-subtitle1 q-mt-sm">Chat Automatizado</h3>
            <p>Seu cliente √© atendido 24h com IA, recebe informa√ß√µes e gera interesse.</p>
          </div>
          <div class="col-12 col-md-4">
            <q-icon name="phone_in_talk" size="64px" color="secondary" />
            <h3 class="text-subtitle1 q-mt-sm">Receba Leads Quentes</h3>
            <p>O ChatCar te entrega contatos com inten√ß√£o real de compra e sugest√µes de abordagem.</p>
          </div>
        </div>
      </section>
      <div class="w100 bg-grad-landing" style="height: 40vh"></div>
      <!-- Benef√≠cios -->
      <section class="bg-grey-2 q-py-xl text-center">
        <div class="">
          <h2 class="text-h4 text-bold q-pb-lg">Por que usar o ChatCar?</h2>
          <div class="row q-col-gutter-md">
            <div class="col-12 col-md-3">
              <q-icon name="attach_money" size="48px" color="green" />
              <p class="q-mt-sm">Baixo custo por lead</p>
            </div>
            <div class="col-12 col-md-3">
              <q-icon name="chat" size="48px" color="blue" />
              <p class="q-mt-sm">Atendimento 100% digital</p>
            </div>
            <div class="col-12 col-md-3">
              <q-icon name="bolt" size="48px" color="orange" />
              <p class="q-mt-sm">R√°pida implementa√ß√£o</p>
            </div>
            <div class="col-12 col-md-3">
              <q-icon name="insights" size="48px" color="purple" />
              <p class="q-mt-sm">Dados inteligentes e IA</p>
            </div>
          </div>
        </div>
      </section>
      <div class="w100 row justify-between no-wrap">
        <img src="modelo1.png" width="50%" alt="">
        <img src="modelo2.png" width="50%" alt="">
      </div>

      <section id="planos" class="q-py-xl bg-teal text-white text-center">
        <div class="container">
          <div class="text-h4 text-bold">Promo√ß√£o por tempo limitado!</div>
          <p class="text-subtitle1 q-mt-sm">De <s>R$ 99,90</s><br>por apenas <strong class="text-h5">R$
              49,90/m√™s</strong>
          </p>

          <div class="row justify-center q-mt-md">
            <div class="col-auto">
              <div class="text-h6">Oferta termina em:</div>
              <div class="row justify-center items-center q-gutter-sm q-mt-sm">
                <div v-for="(time, label) in countdown" :key="label"
                  class="q-pa-sm bg-white text-teal text-bold rounded-borders">
                  <div class="text-h6">{{ time }}</div>
                  <div class="text-caption">{{ label }}</div>
                </div>
              </div>
            </div>
          </div>

          <q-btn label="Aproveitar agora" color="teal-14" glossy class="shadow-1 q-mt-lg" to="/ia" icon="paid" size="lg"
            unelevated />
        </div>
      </section>

      <section class="q-pb-xl q-pt-md bg-grey-2 text-center">
        <div class="container">
          <h2 class="text-h4 text-bold q-mb-sm">Escolha seu Plano</h2>
          <div class="w100 text-subtitle1 q-mt-sm q-mb-xl "> ‚úÖ Utilize a plataforma no plano mensal e pague apenas se
            for utilizar sem
            cobran√ßas ou assinaturas.</div>

          <div class="row q-col-gutter-md justify-center">
            <div class="col-12 col-sm-6 col-md-4">
              <q-card class="q-pa-xs shadow-4 bg-blue-1"
                style="border-bottom:4px solid #00BFA5;border-top:4px solid #00BFA5">
                <q-card-section>
                  <div class="text-h6 text-bold text-teal q-px-xs">üì¶ O QUE VOU RECEBER ?
                  </div>
                  <div class="text-subtitle2 q-mt-sm" style="text-decoration: line-through;">
                    ‚åõ De R$ 99,90
                    por</div>
                  <div style="font-size:2.4rem" class=" q-mb-md q-mt-sm text-teal  text-bold">
                    R$
                    49,90
                  </div>
                  <ul class="text-left column q-gutter-y-sm" style="font-size: 1rem;">
                    <li>üïê <strong>Atenda 24h</strong> com o <strong>link</strong> do chat
                      IA da sua
                      loja ‚Äì sempre pronto pra fechar neg√≥cios.</li>
                    <li>üíæ Armazene <strong>leads simult√¢neos sem limites</strong> e nunca
                      mais
                      perca um contato quente.</li>
                    <li>ü§ñ <strong>ChatVitrine I.A</strong>: seu vendedor digital
                      incans√°vel, pronto
                      pra encantar e converter.</li>
                    <li>üìà <strong>ChatCar IA</strong> gera <strong>relat√≥rios
                        completos</strong>
                      com <strong>dicas personalizadas</strong> pra vender muito mais.
                    </li>
                    <li>üìù Relat√≥rios com <strong>copys otimizadas</strong>, prontos pra
                      persuadir
                      de verdade e garantir a convers√£o.</li>
                    <li>üí¨ <strong>Linguagem natural</strong> pra conversar como humano e
                      fechar
                      como profissional.</li>
                    <li>üåê Funciona tamb√©m como um <strong>site de estoque</strong>,
                      perfeito pra
                      ser usado como <strong>funil de vendas</strong> em tr√°fego pago e
                      an√∫ncios.
                    </li>
                    <li>üîó Se o cliente demonstrar <strong>interesse real</strong>, ele √©
                      redirecionado <strong>automaticamente pro seu WhatsApp</strong> ‚Äì
                      voc√™ s√≥
                      precisa fechar a venda.</li>
                    <li>üöÄ Ideal pra <strong>vendedores</strong>, <strong>times de
                        marketing</strong> e <strong>donos de loja</strong> que n√£o
                      querem ficar
                      pra tr√°s.</li>
                    <li>üéØ Um s√≥ link, <strong>tudo integrado</strong>, sempre vendendo por
                      voc√™.
                      N√£o espere ‚Äì comece hoje!</li>
                  </ul>
                </q-card-section>
                  <q-btn label="Comprar Acesso" icon-right="paid" color="teal" glossy @click="routerPush('semestral')" class="w100 q-pa-xl" />
              </q-card>
            </div>
          </div>
        </div>
      </section>
      <q-dialog v-model="mostrarCarousel" maximized transition-show="slide-up" transition-hide="slide-down">
        <q-card class="bg-white text-dark q-pa-none" style="max-width: 100vw; max-height: 100vh;">
          <q-bar class="bg-white">
            <div class="text-h6">Conhe√ßa a plataforma</div>
            <q-space />
            <q-btn dense flat icon="close" v-close-popup />
          </q-bar>

          <q-carousel animated v-model="slide" control-color="teal" arrows swipeable infinite class="q-mb-sm">
            <q-carousel-slide name="1" class="flex flex-center bg-white">
              <img src="/e1.png" style="max-width: 100%; max-height: 90vh; object-fit: cover;" />
            </q-carousel-slide>

            <q-carousel-slide name="2" class="flex flex-center bg-white">
              <img src="/e2.png" style="max-width: 100%; max-height: 90vh; object-fit: cover;" />
            </q-carousel-slide>

            <q-carousel-slide name="3" class="flex flex-center bg-white">
              <img src="/e3.png" style="max-width: 100%; max-height: 90vh; object-fit: cover;" />
            </q-carousel-slide>
          </q-carousel>

          <q-card-actions align="center">
            <q-btn flat color="teal" label="Fechar" v-close-popup />
          </q-card-actions>
        </q-card>
      </q-dialog>


      <section class="q-py-xl bg-grey-1 text-center">
        <div class="container q-px-md">
          <h2 class="text-h4 text-bold q-mb-md">IA Superinteligente Integrada √† OpenAI</h2>
          <p class="text-subtitle1 q-mt-md">
            Utilizamos a mais avan√ßada vers√£o do ChatGPT, desenvolvida pela OpenAI, para automatizar conversas com
            alt√≠ssima
            precis√£o, empatia e poder de persuas√£o.
          </p>
          <p class="text-body1 q-mt-sm">
            A intelig√™ncia artificial do ChatCar entende as necessidades dos seus clientes, responde com linguagem
            natural e
            personalizada, e direciona cada conversa para uma capta√ß√£o de lead superqualificado.
          </p>
          <p class="text-body1 q-mt-sm">
            Al√©m disso, nossa IA analisa o comportamento dos visitantes e otimiza as intera√ß√µes em tempo real para
            <strong>maximizar a convers√£o em vendas</strong>, garantindo o melhor custo-benef√≠cio do mercado.
          </p>
        </div>
      </section>
      <div class="w100 row justify-between no-wrap">
        <img src="iamodel.png" width="50%" alt="">
        <img src="sistema.png" width="50%" alt="">
      </div>
      <!-- Sobre -->
      <section class="bg-grey-3 q-py-xl container text-center">
        <h2 class="text-h4 text-bold q-pb-lg">Sobre o ChatCar</h2>
        <p class="text-body1 q-px-md">
          O ChatCar foi criado por especialistas em tecnologia e vendas, com foco em transformar o processo de
          atendimento automotivo. Nossa miss√£o √© simplificar o caminho entre sua loja e o comprador, otimizando o tempo
          e maximizando as convers√µes.
        </p>
      </section>

      <!-- Contato -->
      <section class="q-py-xl bg-dark text-white">
        <div class="container text-center">
          <h2 class="text-h5 text-bold q-mb-md">Quer saber mais?</h2>
          <p>Fale com nosso time agora mesmo</p>
          <!-- <q-btn label="Entrar em contato via WhatsApp" color="secondary" class="q-mt-md q-py-xl" icon="sms" glossy
            @click="solicitarContatoWpp()" target="_blank" /> -->
          <div class="w100 text-center text-teal-2 q-pt-lg text-bold">
            chatcar.suporte@gmail.com
          </div>
          <div class="w100 text-center text-teal-2 q-pt-sm text-bold">
            Instagram e TikTok: @chatcar.ia
          </div>
          <div class="w100 text-center text-teal-2 q-pt-md text-bold">
            <q-btn label="adquira j√°!" glossy color="green" class="q-pa-xl q-mt-sm" to="/ia" icon="paid"></q-btn>
          </div>
        </div>
        <!-- <div class="w100 row justify-between q-pt-xl q-px-xl rounded-borders no-wrap">
          <img src="modelo3.png" width="100%" class="rounded-borders shadow-1" alt="">
        </div> -->
      </section>
      <q-dialog v-model="planosDialog.mensal">
        <PlanoMensal @close="planosDialog.mensal = false" />
      </q-dialog>
      <q-dialog v-model="planosDialog.semestral">
        <PlanoSemestral @close="planosDialog.semestral = false" />
      </q-dialog>
      <q-dialog v-model="planosDialog.anual">
        <PlanoAnual @close="planosDialog.anual = false" />
      </q-dialog>
      <!-- Rodap√© -->
      <q-footer class="bg-glass-dark text-white text-center q-pa-sm">
        chatcar.me ¬Æ - 2025
      </q-footer>
    </q-page-container>
  </q-layout>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import PlanoMensal from 'components/PlanoMensal.vue';
import PlanoSemestral from 'components/PlanoSemestral.vue';
import PlanoAnual from 'components/PlanoAnual.vue';
import { useRouter } from 'vue-router';
const mostrarCarousel = ref(false);
const slide = ref("1");

const chatcarsWpp = '61981748795'
const text = 'Ol√°, Gostaria de saber mais sobre como o ChatCars IA pode empolgar meus clientes com uma vitrine e chat inteligente do meu estoque, atendendo-os automatizadamente 24 horas e gerando leads e sugest√µes de abordagem personalizadas de acordo com a intera√ß√£o do cliente com I.A., resumindo tudo isso e os dados dos clientes em um relat√≥rio pronto pro vendedor.'
const storedLoja = JSON.parse(localStorage.getItem('user')) ? JSON.parse(localStorage.getItem('user')) : null
const router = useRouter()
function solicitarContatoWpp() {
  const numero = chatcarsWpp
  const mensagem = encodeURIComponent(text)
  const link = `https://wa.me/${numero}?text=${mensagem}`
  window.open(link, '_blank')
}

const planosDialog = ref({
  mensal: false,
  semestral: false,
  anual: false,
});

function routerPush(plano) {
  if (storedLoja) {
    router.push('/loja/planos')
  } else {
    router.push('/ia')
  }
}

function logout() {
  const confirm = window.confirm('Deseja realmente encerrar a sess√£o no ChatCar?')
  if (confirm) {
    localStorage.clear()
    window.location.reload()
  }
}

const countdown = ref({
  dias: '00',
  horas: '00',
  minutos: '00',
  segundos: '00',
});
function scrollToSection(id) {
  const el = document.getElementById(id)
  if (el) {
    el.scrollIntoView({ behavior: 'smooth' })
  }
}

const targetDate = new Date();
targetDate.setDate(targetDate.getDate() + 2); // Promo√ß√£o por 2 dias

function updateCountdown() {
  const now = new Date();
  const diff = targetDate - now;

  if (diff <= 0) {
    countdown.value = { dias: '00', horas: '00', minutos: '00', segundos: '00' };
    return;
  }

  const d = Math.floor(diff / (1000 * 60 * 60 * 24));
  const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const m = Math.floor((diff / (1000 * 60)) % 60);
  const s = Math.floor((diff / 1000) % 60);

  countdown.value = {
    dias: String(d).padStart(2, '0'),
    horas: String(h).padStart(2, '0'),
    minutos: String(m).padStart(2, '0'),
    segundos: String(s).padStart(2, '0'),
  };
}

let timer;
onMounted(() => {
  updateCountdown();
  timer = setInterval(updateCountdown, 1000);
});
onUnmounted(() => {
  clearInterval(timer);
});

</script>

<style scoped>
.bg-grad-landing {
  background: #000;
  background: -webkit-linear-gradient(to bottom, #0000005f, #565656);
  background: linear-gradient(to bottom, #00000000, #29292971);
}

.bg-glass-dark {
  background: #000000c8;
  background: -webkit-linear-gradient(to bottom, #000000c8, #141414d5);
  background: linear-gradient(to bottom, #000000c8, #141414d5);
  backdrop-filter: blur(4px);
}
</style>
